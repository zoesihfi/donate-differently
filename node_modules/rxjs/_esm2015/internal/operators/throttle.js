<<<<<<< HEAD
<<<<<<< HEAD
import { SimpleOuterSubscriber, innerSubscribe, SimpleInnerSubscriber } from '../innerSubscribe';
=======
import { OuterSubscriber } from '../OuterSubscriber';
import { subscribeToResult } from '../util/subscribeToResult';
>>>>>>> 782567c486993431d88a7d42ed2c18702ecdfd4f
=======
import { SimpleOuterSubscriber, innerSubscribe, SimpleInnerSubscriber } from '../innerSubscribe';
>>>>>>> b9690f13ae0b02552662ffbd680e2069f9283c9e
export const defaultThrottleConfig = {
    leading: true,
    trailing: false
};
export function throttle(durationSelector, config = defaultThrottleConfig) {
<<<<<<< HEAD
<<<<<<< HEAD
    return (source) => source.lift(new ThrottleOperator(durationSelector, !!config.leading, !!config.trailing));
=======
    return (source) => source.lift(new ThrottleOperator(durationSelector, config.leading, config.trailing));
>>>>>>> 782567c486993431d88a7d42ed2c18702ecdfd4f
=======
    return (source) => source.lift(new ThrottleOperator(durationSelector, !!config.leading, !!config.trailing));
>>>>>>> b9690f13ae0b02552662ffbd680e2069f9283c9e
}
class ThrottleOperator {
    constructor(durationSelector, leading, trailing) {
        this.durationSelector = durationSelector;
        this.leading = leading;
        this.trailing = trailing;
    }
    call(subscriber, source) {
        return source.subscribe(new ThrottleSubscriber(subscriber, this.durationSelector, this.leading, this.trailing));
    }
}
<<<<<<< HEAD
<<<<<<< HEAD
class ThrottleSubscriber extends SimpleOuterSubscriber {
=======
class ThrottleSubscriber extends OuterSubscriber {
>>>>>>> 782567c486993431d88a7d42ed2c18702ecdfd4f
=======
class ThrottleSubscriber extends SimpleOuterSubscriber {
>>>>>>> b9690f13ae0b02552662ffbd680e2069f9283c9e
    constructor(destination, durationSelector, _leading, _trailing) {
        super(destination);
        this.destination = destination;
        this.durationSelector = durationSelector;
        this._leading = _leading;
        this._trailing = _trailing;
        this._hasValue = false;
    }
    _next(value) {
        this._hasValue = true;
        this._sendValue = value;
        if (!this._throttled) {
            if (this._leading) {
                this.send();
            }
            else {
                this.throttle(value);
            }
        }
    }
    send() {
        const { _hasValue, _sendValue } = this;
        if (_hasValue) {
            this.destination.next(_sendValue);
            this.throttle(_sendValue);
        }
        this._hasValue = false;
<<<<<<< HEAD
<<<<<<< HEAD
        this._sendValue = undefined;
=======
        this._sendValue = null;
>>>>>>> 782567c486993431d88a7d42ed2c18702ecdfd4f
=======
        this._sendValue = undefined;
>>>>>>> b9690f13ae0b02552662ffbd680e2069f9283c9e
    }
    throttle(value) {
        const duration = this.tryDurationSelector(value);
        if (!!duration) {
<<<<<<< HEAD
<<<<<<< HEAD
            this.add(this._throttled = innerSubscribe(duration, new SimpleInnerSubscriber(this)));
=======
            this.add(this._throttled = subscribeToResult(this, duration));
>>>>>>> 782567c486993431d88a7d42ed2c18702ecdfd4f
=======
            this.add(this._throttled = innerSubscribe(duration, new SimpleInnerSubscriber(this)));
>>>>>>> b9690f13ae0b02552662ffbd680e2069f9283c9e
        }
    }
    tryDurationSelector(value) {
        try {
            return this.durationSelector(value);
        }
        catch (err) {
            this.destination.error(err);
            return null;
        }
    }
    throttlingDone() {
        const { _throttled, _trailing } = this;
        if (_throttled) {
            _throttled.unsubscribe();
        }
<<<<<<< HEAD
<<<<<<< HEAD
        this._throttled = undefined;
=======
        this._throttled = null;
>>>>>>> 782567c486993431d88a7d42ed2c18702ecdfd4f
=======
        this._throttled = undefined;
>>>>>>> b9690f13ae0b02552662ffbd680e2069f9283c9e
        if (_trailing) {
            this.send();
        }
    }
<<<<<<< HEAD
<<<<<<< HEAD
    notifyNext() {
=======
    notifyNext(outerValue, innerValue, outerIndex, innerIndex, innerSub) {
>>>>>>> 782567c486993431d88a7d42ed2c18702ecdfd4f
=======
    notifyNext() {
>>>>>>> b9690f13ae0b02552662ffbd680e2069f9283c9e
        this.throttlingDone();
    }
    notifyComplete() {
        this.throttlingDone();
    }
}
//# sourceMappingURL=throttle.js.map