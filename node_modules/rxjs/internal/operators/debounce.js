"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    }
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
<<<<<<< HEAD
<<<<<<< HEAD
var innerSubscribe_1 = require("../innerSubscribe");
=======
var OuterSubscriber_1 = require("../OuterSubscriber");
var subscribeToResult_1 = require("../util/subscribeToResult");
>>>>>>> 782567c486993431d88a7d42ed2c18702ecdfd4f
=======
var innerSubscribe_1 = require("../innerSubscribe");
>>>>>>> b9690f13ae0b02552662ffbd680e2069f9283c9e
function debounce(durationSelector) {
    return function (source) { return source.lift(new DebounceOperator(durationSelector)); };
}
exports.debounce = debounce;
var DebounceOperator = (function () {
    function DebounceOperator(durationSelector) {
        this.durationSelector = durationSelector;
    }
    DebounceOperator.prototype.call = function (subscriber, source) {
        return source.subscribe(new DebounceSubscriber(subscriber, this.durationSelector));
    };
    return DebounceOperator;
}());
var DebounceSubscriber = (function (_super) {
    __extends(DebounceSubscriber, _super);
    function DebounceSubscriber(destination, durationSelector) {
        var _this = _super.call(this, destination) || this;
        _this.durationSelector = durationSelector;
        _this.hasValue = false;
<<<<<<< HEAD
<<<<<<< HEAD
=======
        _this.durationSubscription = null;
>>>>>>> 782567c486993431d88a7d42ed2c18702ecdfd4f
=======
>>>>>>> b9690f13ae0b02552662ffbd680e2069f9283c9e
        return _this;
    }
    DebounceSubscriber.prototype._next = function (value) {
        try {
            var result = this.durationSelector.call(this, value);
            if (result) {
                this._tryNext(value, result);
            }
        }
        catch (err) {
            this.destination.error(err);
        }
    };
    DebounceSubscriber.prototype._complete = function () {
        this.emitValue();
        this.destination.complete();
    };
    DebounceSubscriber.prototype._tryNext = function (value, duration) {
        var subscription = this.durationSubscription;
        this.value = value;
        this.hasValue = true;
        if (subscription) {
            subscription.unsubscribe();
            this.remove(subscription);
        }
<<<<<<< HEAD
<<<<<<< HEAD
        subscription = innerSubscribe_1.innerSubscribe(duration, new innerSubscribe_1.SimpleInnerSubscriber(this));
=======
        subscription = subscribeToResult_1.subscribeToResult(this, duration);
>>>>>>> 782567c486993431d88a7d42ed2c18702ecdfd4f
=======
        subscription = innerSubscribe_1.innerSubscribe(duration, new innerSubscribe_1.SimpleInnerSubscriber(this));
>>>>>>> b9690f13ae0b02552662ffbd680e2069f9283c9e
        if (subscription && !subscription.closed) {
            this.add(this.durationSubscription = subscription);
        }
    };
<<<<<<< HEAD
<<<<<<< HEAD
    DebounceSubscriber.prototype.notifyNext = function () {
=======
    DebounceSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {
>>>>>>> 782567c486993431d88a7d42ed2c18702ecdfd4f
=======
    DebounceSubscriber.prototype.notifyNext = function () {
>>>>>>> b9690f13ae0b02552662ffbd680e2069f9283c9e
        this.emitValue();
    };
    DebounceSubscriber.prototype.notifyComplete = function () {
        this.emitValue();
    };
    DebounceSubscriber.prototype.emitValue = function () {
        if (this.hasValue) {
            var value = this.value;
            var subscription = this.durationSubscription;
            if (subscription) {
<<<<<<< HEAD
<<<<<<< HEAD
=======
>>>>>>> b9690f13ae0b02552662ffbd680e2069f9283c9e
                this.durationSubscription = undefined;
                subscription.unsubscribe();
                this.remove(subscription);
            }
            this.value = undefined;
<<<<<<< HEAD
=======
                this.durationSubscription = null;
                subscription.unsubscribe();
                this.remove(subscription);
            }
            this.value = null;
>>>>>>> 782567c486993431d88a7d42ed2c18702ecdfd4f
=======
>>>>>>> b9690f13ae0b02552662ffbd680e2069f9283c9e
            this.hasValue = false;
            _super.prototype._next.call(this, value);
        }
    };
    return DebounceSubscriber;
<<<<<<< HEAD
<<<<<<< HEAD
}(innerSubscribe_1.SimpleOuterSubscriber));
=======
}(OuterSubscriber_1.OuterSubscriber));
>>>>>>> 782567c486993431d88a7d42ed2c18702ecdfd4f
=======
}(innerSubscribe_1.SimpleOuterSubscriber));
>>>>>>> b9690f13ae0b02552662ffbd680e2069f9283c9e
//# sourceMappingURL=debounce.js.map